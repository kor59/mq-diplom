"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_conversations_conversations_ts-ui_packages_copy-to-clipboard_CopyToClipboardButton_tsx"],{74088:(e,t,i)=>{i.d(t,{Su:()=>o.S,UA:()=>r.U,yF:()=>x,cT:()=>E,i4:()=>_.i,L4:()=>D.L});var n=i(14768);i(30754);var o=i(99588);i(83283);var r=i(62812),a=i(74848),l=i(6489),s=i(80221),d=i(9808),c=i(13233),m=i(42083),u=i(96679),f=i(99543),h=i(75177),p=i(96540),g=i(38666);function x({isAnchorable:e=!1,index:t=0,isLastChild:i,anchorPrefix:n="r",comment:o,commentingImplementation:r,filePath:x,hideActions:b,enterDialogMode:y=c.l,onRefreshThread:C,onQuoteReply:j=c.l,threadCommentCount:v,threadId:N,threadsConnectionId:S,ghostUser:T=d.t.ghostUser}){let{addToast:E}=(0,f.Y6)(),[_,D]=(0,p.useState)(!1),[I,A]=(0,p.useState)(o.isHidden),[L,R]=(0,p.useState)(!1),{deleteComment:w,hideComment:O,unhideComment:k}=r,U=(0,p.useRef)(null),P=(0,p.useRef)(null),$=()=>{U.current?.focus()};(0,p.useEffect)(()=>{if(_){let e=window.setTimeout($);return()=>{window.clearTimeout(e)}}},[_]);let B=o.currentDiffResourcePath?.split("#r").pop(),M=B?`${n}${B}`:void 0,H=M&&u.fV?new URL(`${u.fV.pathname}#${M}`,u.fV.origin).toString():void 0,G=(0,p.useRef)(null);(0,p.useEffect)(()=>{e&&B&&M&&window.location.hash.split("#").pop()===M&&((0,g.p)(B,n),y?.(!1),G.current?.focus())},[n,M,B,y,e]);let F={outline:"2px solid",outlineColor:"accent.fg",outlineOffset:"-2px",boxShadow:"none"},V=t>0,q=t>1,z={headingProps:{as:"h3"},avatarUrl:o.author?.avatarUrl??T.avatarUrl,comment:{...o,url:H??"",referenceText:o.reference.text??`#${o.reference.number}`},commentRef:G,deleteComment:()=>{w({commentId:o.id,onCompleted:()=>{C?.(N)},onError:()=>{R(!1),E({type:"error",message:"Failed to delete comment"})},threadCommentCount:v,threadId:N,threadsConnectionId:S,filePath:x})},editComment:()=>{D(!0)},editHistoryComponent:void 0,hideComment:e=>{O({commentDatabaseId:o.databaseId,reason:e,onCompleted:()=>{C?.(N)},onError:()=>{R(!1),E({type:"error",message:"Failed to hide comment"})}})},onMinimize:A,isMinimized:I,commentAuthorLogin:o.author?.login??T.login,navigate:c.l,commentSubjectAuthorLogin:o.reference?.author?.login??"",commentSubjectType:r.commentSubjectType,onReplySelect:j,unhideComment:()=>{k({commentDatabaseId:o.databaseId,onCompleted:()=>{C?.(N)},onError:()=>{R(!1),E({type:"error",message:"Failed to unhide comment"})}})},hideActions:b,isReply:V,forceInlineAvatar:!0,containerStyle:{}};return(0,a.jsxs)(h.A,{ref:G,id:e?M:void 0,tabIndex:-1,sx:{"&:not(:first-child)":{backgroundColor:"canvas.inset"},"&:first-child + div":{borderTop:"1px solid",borderColor:"border.muted"},":target":F,":focus":F,pb:V?0:2},children:[q&&(0,a.jsx)(h.A,{sx:{display:"flex",pl:V?1:0},children:(0,a.jsx)(h.A,{sx:{ml:4,height:8,borderLeft:"1px solid",borderColor:"border.default"}})}),(0,a.jsx)(h.A,{sx:{px:3,pt:q?0:2,pb:0},children:(0,a.jsx)(l.v,{...z,actions:b?void 0:(0,a.jsx)(s.p,{...z})})}),(0,a.jsxs)(h.A,{sx:{display:"flex",pl:V?1:0},children:[V&&(0,a.jsx)(h.A,{sx:{ml:4,mr:1,pl:3,borderLeft:"1px solid",borderColor:"border.default",...i&&{borderImage:"linear-gradient(to bottom, var(--borderColor-default, var(--color-border-default)), rgba(0, 0, 0, 0)) 1 100%"}}}),(0,a.jsx)(h.A,{sx:V?{pb:2,pr:2,overflowX:"auto",width:"100%"}:{px:3,pb:2,width:"100%"},children:o.bodyHTML&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(m.oG,{ref:P,className:"markdown-body","comment-testid":`Comment body html for comment ${o.id}`,html:o.bodyHTML,sx:{mt:1,fontSize:1}})})})]})]})}try{x.displayName||(x.displayName="ReviewThreadCommentWithoutReactions")}catch{}var b=i(75367),y=i(85349),C=i(58655),j=i(39459),v=i(38621),N=i(84217),S=i(87330);function T({addCommentDialogTitle:e,isLeftSide:t,filePath:i,lineNumber:o,onAddComment:r,onClose:l,viewerData:s,threadsConnectionId:d,showOnCloseIcon:c=!0,...m}){return(0,a.jsxs)(h.A,{sx:{px:2,pb:2,pt:1},children:[(0,a.jsxs)(h.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsxs)(N.A,{as:"h4",className:"f5 ml-1 pt-1 pb-2",children:[(0,a.jsx)(j.r,{alt:s.login,size:24,src:s.avatarUrl||"",sx:{mr:2}}),(0,a.jsx)("span",{children:e??"Add a comment"})]}),l&&c&&(0,a.jsx)(S.K,{unsafeDisableTooltip:!0,variant:"invisible",icon:v.XIcon,onClick:l,"aria-label":"Cancel"})]}),(0,a.jsx)(n.U,{focusOnMount:!0,condensed:!1,fileLevelComment:!1,filePath:i,lineNumber:o,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:o})=>{r({text:e,onError:n,onCompleted:(e,i)=>{i&&(0,g.p)(i.toString()),t?.(e,i)},submitBatch:o,filePath:i,threadsConnectionId:d})},onCancelComment:l,side:t?"LEFT":"RIGHT",...m})]})}try{T.displayName||(T.displayName="StartThreadComment")}catch{}function E({align:e="end",anchorRef:t,isOpen:i,isDialog:n=!0,returnFocusRef:o,onCloseCommentDialog:r,suggestedChangesConfig:l,...s}){let{sendAnalyticsEvent:d}=(0,b.s)(),{isInDialogMode:m}=(0,C.q)(),u=(0,p.useMemo)(()=>{if(i&&l?.configureSuggestedChangesFromLineRange)return l.configureSuggestedChangesFromLineRange(l?.selectedDiffRowRange,l?.shouldStartNewConversationWithSuggestedChange)},[i,l]);return i?n?(0,a.jsx)(y.T,{align:e,anchorRef:t,focusZoneSettings:{disabled:!0},open:i,renderAnchor:null,focusTrapSettings:{disabled:!0},overlayProps:{id:"conversation-dialog",role:"dialog",width:"xlarge",preventOverflow:!1,returnFocusRef:o,sx:{borderRadius:2},"aria-label":"Add a comment",onClickOutside:c.l,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}},onClose:r,children:(0,a.jsx)(T,{onClose:()=>{r(),d("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},suggestedChangesConfig:u,...s})}):(0,a.jsx)("div",{className:"rounded-2 bgColor-default","data-marker-id":"new-comment",tabIndex:m?0:-1,children:(0,a.jsx)(T,{onClose:()=>{r(),d("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},showOnCloseIcon:!1,suggestedChangesConfig:u,...s})}):null}try{E.displayName||(E.displayName="StartConversation")}catch{}var _=i(22904),D=i(35608);i(55238),c.l,c.l,c.l,c.l,c.l,c.l,c.l,c.l,c.l,c.l,c.l,c.l,c.l,c.l,c.l},38666:(e,t,i)=>{i.d(t,{p:()=>o});var n=i(66871);function o(e,t="r"){(0,n.Zu)(`#${t}${e}`)}},35608:(e,t,i)=>{i.d(t,{L:()=>d});var n=i(85351),o=i(96540);let{getItem:r,removeItem:a,setItem:l}=(0,n.D)("localStorage"),s=(e,t)=>{let{diffSide:i,filePath:n,line:o,subjectId:r}=e;if(t)return`PullRequest:${r}-File:${n}`;if(void 0!==o&&void 0!==i)return`PullRequest:${r}-File:${n}-Line:${o}-DiffSide:${i}`;throw Error("Cannot build diff line comment cache key for a comment without a line number or diff side")};function d({diffSide:e,filePath:t,handlePersistedCommentExists:i,line:n,subjectId:d,threadId:c,fileLevelComment:m}){let u,f;let h=(0,o.useMemo)(()=>c||(c??s({diffSide:e,filePath:t,line:n,subjectId:d},m)),[e,t,n,d,c,m]),{hasPersistedComment:p,removePersistedCommentFromStorage:g}=(u=r(h),f=!!u?.text?.trim(),(0,o.useEffect)(()=>{f&&i?.(u)},[f]),{hasPersistedComment:f,removePersistedCommentFromStorage:()=>{a(h),f=!1,u=null}});return{hasPersistedComment:p,persistCommentToStorage:e=>{let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide}),l(h,t)},removePersistedCommentFromStorage:g}}},43032:(e,t,i)=>{function n(e,t){return t.some(t=>t.commentId===e.commentId&&t.path===e.path&&t.suggestion.length===e.suggestion.length&&o(t.suggestion,e.suggestion))}i.d(t,{EJ:()=>l,Lm:()=>s,c0:()=>n,o_:()=>a});let o=(e,t)=>e.length===t.length&&!e.some((e,i)=>e!==t[i]),r={USER_CANNOT_APPLY_SUGGESTION:"You do not have permission to apply this suggestion.",PULL_REQUEST_IS_CLOSED:"This suggestion cannot be applied because the pull request is closed.",PULL_REQUEST_IS_IN_MERGE_QUEUE:"This suggestion cannot be applied because the pull request is queued to merge.",IS_OUTDATED:"This suggestion is outdated and cannot be applied.",IS_PENDING:"This suggestion is part of a pending comment and cannot be applied.",IS_RESOLVED:"This suggestion is part of a resolved comment and cannot be applied.",UNCHANGED_CODE:"This suggestion is invalid because no changes were made to the code.",INVALID_RANGE:"Unable to commit due to other pending changes affecting this line.",BATCH_TOO_BIG:"Unable to commit due to too many changes in the batch.",DELETED_LINES:"Unable to apply suggestions on deleted lines.",RANGE_NOT_PROVIDED:"This suggestion does not have a valid line range.",UNABLE_TO_DETERMINE_VALIDITY:"Unable to determine the validity of this suggestion."};function a({suggestedChange:e,isOutdated:t,isPending:i,isResolved:n,pullRequestIsClosed:o,pullRequestIsInMergeQueue:a,userCanApplySuggestion:l,applySuggestedChangesValidationData:s,suggestedChangesConfig:d}){let{lineRange:c}=s;if(t)return{isValid:!1,reason:r.IS_OUTDATED};if(i)return{isValid:!1,reason:r.IS_PENDING};if(n)return{isValid:!1,reason:r.IS_RESOLVED};if(o)return{isValid:!1,reason:r.PULL_REQUEST_IS_CLOSED};if(a)return{isValid:!1,reason:r.PULL_REQUEST_IS_IN_MERGE_QUEUE};if(!l)return{isValid:!1,reason:r.USER_CANNOT_APPLY_SUGGESTION};if(!c)return{isValid:!1,reason:r.RANGE_NOT_PROVIDED};if(!d)return{isValid:!1,reason:r.UNABLE_TO_DETERMINE_VALIDITY};if(!d?.isValidSuggestionRange)return{isValid:!1,reason:r.DELETED_LINES};let m=d?.sourceContentFromDiffLines,u=e.suggestion.join("\n");return 0!==e.suggestion.length&&u===m?{isValid:!1,reason:r.UNCHANGED_CODE}:{isValid:!0}}function l(e,t){let i={isValid:!1,reason:r.INVALID_RANGE},n={isValid:!1,reason:r.BATCH_TOO_BIG};return t.length>=50?n:t.find(t=>t.threadId===e.threadId)||function(e,t){for(let o of t)if(e.path===o.path){var i,n;return i=e.lineRange,n=o.lineRange,i.endLineNumber>=n.startLineNumber&&i.startLineNumber<=n.endLineNumber}return!1}(e,t)?i:{isValid:!0}}function s(e){if(!e||"LINE"!==e.subjectType||!e.subject)return;let t=e.subject.startDiffSide??e.subject.endDiffSide;if(!t)return;if(e.isOutdated&&e.subject.originalStartLine&&e.subject.originalEndLine)return{endLineNumber:e.subject.originalEndLine,endOrientation:e.subject.endDiffSide||"RIGHT",startLineNumber:e.subject.originalStartLine,startOrientation:t};if(!e.subject.endLine||!e.subject.endDiffSide)return;let i=e.subject.startLine??e?.subject.endLine;return{endLineNumber:e.subject.endLine,endOrientation:e.subject.endDiffSide,startLineNumber:i,startOrientation:t||"RIGHT"}}},55238:(e,t,i)=>{i.d(t,{U:()=>n});let n={Failure:"FAILURE",Notice:"NOTICE",Warning:"WARNING"}},51891:(e,t,i)=>{function n(e,t){for(let i of function e(t,i=[]){if(""===t)return i;let n=t.match(o());if(!n)return i;let r=n.groups.fence;if(!r)return i;let a=r.includes("~")?"~":"`",l=t.match(function(e,t){let i=o([e],t);return RegExp(`${i.source}(?:\r?
)(?<suggestion>.*?)(?:\r?
)^ {0,3}${e}{${t},}[ 	]*$`,"ms")}(a,r.length));if(!l)return i;let s=0,d=n.groups.indent;""!==d&&(s=d.length);let c=l.groups.suggestion;if(s>0){let e=RegExp(`^ {0,${s}}`,"m");c=c.replace(e,"")}return i.push(c),e(t.slice(l.index+l[0].length),i)}(e))if(i===t)return{isValid:!1,errorMessage:"Suggested change cannot be the same as the original line"};return{isValid:!0,errorMessage:""}}function o(e=["`","~"],t){let i=t?`{${t}}`:"{3,}",n=e.map(e=>`${e}${i}`);return RegExp(`^(?<indent> {0,3})(?<fence>${n.join("|")})suggestion[ 	]*$`,"m")}i.d(t,{u:()=>n})},640:(e,t,i)=>{i.d(t,{D:()=>n});function n(e){if("clipboard"in navigator)return navigator.clipboard.writeText(e);let t=document.body;if(!t)return Promise.reject(Error());let i=function(e){let t=document.createElement("pre");return t.style.width="1px",t.style.height="1px",t.style.position="fixed",t.style.top="5px",t.textContent=e,t}(e);return t.appendChild(i),!function(e){if("clipboard"in navigator)return navigator.clipboard.writeText(e.textContent||"");let t=getSelection();if(null==t)return Promise.reject(Error());t.removeAllRanges();let i=document.createRange();i.selectNodeContents(e),t.addRange(i),document.execCommand("copy"),t.removeAllRanges(),Promise.resolve()}(i),t.removeChild(i),Promise.resolve()}},87591:(e,t,i)=>{function n(e){return`line-${e}`}function o(e,t,i){return`${e}${"left"===t?"L":"R"}${i}`}function r(e){return"DELETION"===e?"left":"right"}function a(e,t=!1,i=!1){if(i)return"var(--bgColor-attention-muted, var(--color-attention-subtle))";switch(e){case"ADDITION":return t?"var(--diffBlob-additionNum-bgColor, var(--diffBlob-addition-bgColor-num))":"var(--diffBlob-additionLine-bgColor, var(--diffBlob-addition-bgColor-line))";case"DELETION":return t?"var(--diffBlob-deletionNum-bgColor, var(--diffBlob-deletion-bgColor-num))":"var(--diffBlob-deletionLine-bgColor, var(--diffBlob-deletion-bgColor-line))";case"HUNK":return t?"var(--diffBlob-hunkNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-hunkLine-bgColor, var(--bgColor-accent-muted))";case"EMPTY":return t?"var(--diffBlob-emptyNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-emptyLine-bgColor, var(--bgColor-accent-muted))";default:return}}function l(e){let t=0;if(e)for(let i of e)t=Math.max(t,i?.left??0,i?.right??0);return Math.max(8*t.toString().length+20,40).toString()}i.d(t,{IQ:()=>o,Sq:()=>n,XU:()=>r,c7:()=>l,gK:()=>a})},91215:(e,t,i)=>{i.d(t,{Jg:()=>c,nq:()=>u,uP:()=>f.u,$e:()=>x,P3:()=>p,wj:()=>b,l4:()=>S,Qe:()=>y,Ah:()=>E});var n=i(74848),o=i(21728),r=i(34164),a=i(42083),l=i(87591);let s=e=>{let t,i,s,d,c,m,u,f,h,p;let g=(0,o.c)(34),{dragging:x,isHighlighted:b,isLeftColumn:y,colSpan:C,line:j,lineAnchor:v}=e,N=j.html,S="";if(["ADDITION","DELETION"].includes(j.type)&&["+","-"].includes(N[0])){let e;S=N[0],g[0]!==N?(e=N.slice(1),g[0]=N,g[1]=e):e=g[1],N=e}let T=x&&b,E=y&&"HUNK"!==j.type;g[2]!==T||g[3]!==E?(t=(0,r.$)("diff-text-cell",{"border-left color-border-accent-emphasis":T,"border-right":E}),g[2]=T,g[3]=E,g[4]=t):t=g[4],g[5]!==v?(i=v?(0,l.Sq)(v):void 0,g[5]=v,g[6]=i):i=g[6],g[7]!==b||g[8]!==j.type?(s=(0,l.gK)(j.type,!1,b),g[7]=b,g[8]=j.type,g[9]=s):s=g[9],g[10]!==s?(d={backgroundColor:s},g[10]=s,g[11]=d):d=g[11];let _=S,D="ADDITION"===j.type,I="DELETION"===j.type;g[12]!==D||g[13]!==I?(c=(0,r.$)("diff-text syntax-highlighted-line",{addition:D,deletion:I}),g[12]=D,g[13]=I,g[14]=c):c=g[14];let A=e.lineChild,L="HUNK"===j.type;g[15]!==L?(m=(0,r.$)("diff-text-inner",{"color-fg-muted":L}),g[15]=L,g[16]=m):m=g[16];let R="CONTEXT"===j.type?"-7px":void 0;return g[17]!==R?(u={marginLeft:R},g[17]=R,g[18]=u):u=g[18],g[19]!==N||g[20]!==m||g[21]!==u?(f=(0,n.jsx)(a.mo,{className:m,html:N,style:u}),g[19]=N,g[20]=m,g[21]=u,g[22]=f):f=g[22],g[23]!==S||g[24]!==e.lineChild||g[25]!==f||g[26]!==c?(h=(0,n.jsxs)("code",{"data-code-marker":_,className:c,children:[A,f]}),g[23]=S,g[24]=e.lineChild,g[25]=f,g[26]=c,g[27]=h):h=g[27],g[28]!==C||g[29]!==h||g[30]!==t||g[31]!==i||g[32]!==d?(p=(0,n.jsx)("td",{className:t,colSpan:C,id:i,style:d,children:h}),g[28]=C,g[29]=h,g[30]=t,g[31]=i,g[32]=d,g[33]=p):p=g[33],p};try{s.displayName||(s.displayName="DiffText")}catch{}let d=e=>{let t,i,a,s,d,c,m,u,f,h,p,g,x;let b=(0,o.c)(30);b[0]!==e?({ariaLabel:t,children:i,hasExpanderButton:s,lineType:m,colSpan:a,interactiveProps:d,isHighlighted:c,...u}=e,b[0]=e,b[1]=t,b[2]=i,b[3]=a,b[4]=s,b[5]=d,b[6]=c,b[7]=m,b[8]=u):(t=b[1],i=b[2],a=b[3],s=b[4],d=b[5],c=b[6],m=b[7],u=b[8]),b[9]!==i?(f=(0,n.jsx)("code",{className:"pr-2",children:i}),b[9]=i,b[10]=f):f=b[10];let y=f;if(d){let e;b[11]!==t||b[12]!==d||b[13]!==y?(e=(0,n.jsx)("button",{className:"diff-line-number-button",...d,"aria-label":t,children:y}),b[11]=t,b[12]=d,b[13]=y,b[14]=e):e=b[14],y=e}let C=d?void 0:t,j=!!d;b[15]!==s||b[16]!==j?(h=(0,r.$)("diff-line-number",{"has-expander":s,clickable:j}),b[15]=s,b[16]=j,b[17]=h):h=b[17];let v=a||1;return b[18]!==c||b[19]!==m?(p=(0,l.gK)(m,!0,c),b[18]=c,b[19]=m,b[20]=p):p=b[20],b[21]!==p?(g={backgroundColor:p},b[21]=p,b[22]=g):g=b[22],b[23]!==u||b[24]!==C||b[25]!==h||b[26]!==v||b[27]!==g||b[28]!==y?(x=(0,n.jsx)("td",{"aria-label":C,"data-line-number":!0,className:h,colSpan:v,style:g,...u,children:y}),b[23]=u,b[24]=C,b[25]=h,b[26]=v,b[27]=g,b[28]=y,b[29]=x):x=b[29],x};try{d.displayName||(d.displayName="LineNumber")}catch{}let c=e=>{let t,i,r,a;let l=(0,o.c)(28),{dragging:c,isHighlighted:m,isLeftColumn:u,isSplit:f,lineAnchor:h,line:p,lineChild:g,onLineNumberClick:x}=e,b="CONTEXT"===p.type||"INJECTED_CONTEXT"===p.type,y="ADDITION"!==p.type,C=y||!f,j="DELETION"!==p.type,v=j&&!b||!f,N=f&&b?u?p.left:p.right:p.left;return l[0]!==N||l[1]!==m||l[2]!==p.left||l[3]!==p.right||l[4]!==p.type||l[5]!==x||l[6]!==y||l[7]!==C?(t=C&&(0,n.jsx)(d,{ariaLabel:`Line ${y?p.left?.toString():p.right?.toString()}`,lineType:p.type,interactiveProps:x?{onClick:x}:null,isHighlighted:m,children:y&&N}),l[0]=N,l[1]=m,l[2]=p.left,l[3]=p.right,l[4]=p.type,l[5]=x,l[6]=y,l[7]=C,l[8]=t):t=l[8],l[9]!==m||l[10]!==p.left||l[11]!==p.right||l[12]!==p.type||l[13]!==x||l[14]!==j||l[15]!==v?(i=v&&(0,n.jsx)(d,{ariaLabel:`Line ${j?p.right?.toString():p.left?.toString()}`,lineType:p.type,interactiveProps:x?{onClick:x}:null,isHighlighted:m,children:j&&p.right}),l[9]=m,l[10]=p.left,l[11]=p.right,l[12]=p.type,l[13]=x,l[14]=j,l[15]=v,l[16]=i):i=l[16],l[17]!==c||l[18]!==m||l[19]!==u||l[20]!==p||l[21]!==h||l[22]!==g?(r=(0,n.jsx)(s,{dragging:c,isHighlighted:m,isLeftColumn:u,line:p,lineAnchor:h,lineChild:g}),l[17]=c,l[18]=m,l[19]=u,l[20]=p,l[21]=h,l[22]=g,l[23]=r):r=l[23],l[24]!==t||l[25]!==i||l[26]!==r?(a=(0,n.jsxs)(n.Fragment,{children:[t,i,r]}),l[24]=t,l[25]=i,l[26]=r,l[27]=a):a=l[27],a};try{c.displayName||(c.displayName="DiffLinePart")}catch{}var m=i(75177);function u(){let e,t,i;let r=(0,o.c)(3);return r[0]===Symbol.for("react.memo_cache_sentinel")?(e={bottom:"0 !important",clip:"rect(1px, 1px, 1px, 1px)",clipPath:"inset(50%)",height:"84px",position:"absolute",width:"320px"},r[0]=e):e=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsxs)("clipPath",{id:"diff-placeholder",children:[(0,n.jsx)("rect",{height:"11.9298746",rx:"2",width:"67.0175439",x:"0",y:"0"}),(0,n.jsx)("rect",{height:"11.9298746",rx:"2",width:"100.701754",x:"18.9473684",y:"47.7194983"}),(0,n.jsx)("rect",{height:"11.9298746",rx:"2",width:"37.8947368",x:"0",y:"71.930126"}),(0,n.jsx)("rect",{height:"11.9298746",rx:"2",width:"53.3333333",x:"127.017544",y:"48.0703769"}),(0,n.jsx)("rect",{height:"11.9298746",rx:"2",width:"72.9824561",x:"187.719298",y:"48.0703769"}),(0,n.jsx)("rect",{height:"11.9298746",rx:"2",width:"140.350877",x:"76.8421053",y:"0"}),(0,n.jsx)("rect",{height:"11.9298746",rx:"2",width:"140.350877",x:"17.8947368",y:"23.8597491"}),(0,n.jsx)("rect",{height:"11.9298746",rx:"2",width:"173.684211",x:"166.315789",y:"23.8597491"})]}),r[1]=t):t=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)(m.A,{"aria-hidden":"true",as:"svg",version:"1.1",viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",sx:e,children:(0,n.jsxs)("defs",{children:[t,(0,n.jsxs)("linearGradient",{id:"animated-diff-gradient",spreadMethod:"reflect",x1:"0",x2:"0",y1:"0",y2:"1",children:[(0,n.jsx)("stop",{offset:"0",stopColor:"#eee"}),(0,n.jsx)("stop",{offset:"0.2",stopColor:"#eee"}),(0,n.jsx)("stop",{offset:"0.5",stopColor:"#ddd"}),(0,n.jsx)("stop",{offset:"0.8",stopColor:"#eee"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#eee"}),(0,n.jsx)("animateTransform",{attributeName:"y1",dur:"1s",repeatCount:"3",values:"0%; 100%; 0"}),(0,n.jsx)("animateTransform",{attributeName:"y2",dur:"1s",repeatCount:"3",values:"100%; 200%; 0"})]})]})}),r[2]=i):i=r[2],i}try{u.displayName||(u.displayName="DiffPlaceholder")}catch{}var f=i(42597);i(24965);var h=i(38621);function p(e){let t,i,r;let a=(0,o.c)(10),{currentLine:l,hunkButton:c,isLeftColumn:m,isSplit:u}=e;if(u&&!m)return null;a[0]!==l.type||a[1]!==c||a[2]!==u?(t=c?(0,n.jsx)(d,{colSpan:u?1:2,hasExpanderButton:!0,lineType:l.type,children:c}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d,{lineType:l.type,children:(0,n.jsx)(h.KebabHorizontalIcon,{})}),!u&&(0,n.jsx)(d,{lineType:l.type,children:(0,n.jsx)(h.KebabHorizontalIcon,{})})]}),a[0]=l.type,a[1]=c,a[2]=u,a[3]=t):t=a[3];let f=u?3:void 0;return a[4]!==l||a[5]!==f?(i=(0,n.jsx)(s,{isHighlighted:!1,isLeftColumn:!0,colSpan:f,line:l}),a[4]=l,a[5]=f,a[6]=i):i=a[6],a[7]!==t||a[8]!==i?(r=(0,n.jsxs)(n.Fragment,{children:[t,i]}),a[7]=t,a[8]=i,a[9]=r):r=a[9],r}try{p.displayName||(p.displayName="HunkHeaderDiffLine")}catch{}function g(){let e;let t=(0,o.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{className:"hunk-kebab-icon pr-2 pb-1",children:(0,n.jsx)(h.KebabHorizontalIcon,{})}),t[0]=e):e=t[0],e}try{g.displayName||(g.displayName="HunkKebabIcon")}catch{}function x(e){let t,i,a;let l=(0,o.c)(5),{isLeftColumn:s}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(d,{lineType:"EMPTY"}),l[0]=t):t=l[0],l[1]!==s?(i=(0,r.$)("empty-diff-line",{"border-right":s}),l[1]=s,l[2]=i):i=l[2],l[3]!==i?(a=(0,n.jsxs)(n.Fragment,{children:[t,(0,n.jsx)("td",{className:i,colSpan:1})]}),l[3]=i,l[4]=a):a=l[4],a}try{x.displayName||(x.displayName="EmptyDiffLine")}catch{}function b(e){let t,i,r,a,l,s,d,c;let m=(0,o.c)(15);return m[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)("thead",{className:"sr-only",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{scope:"col",children:"Original file line number"}),(0,n.jsx)("th",{scope:"col",children:"Original file line"}),(0,n.jsx)("th",{scope:"col",children:"Diff line number"}),(0,n.jsx)("th",{scope:"col",children:"Diff line change"})]})}),m[0]=t):t=m[0],m[1]!==e.lineWidth?(i=(0,n.jsx)("col",{width:e.lineWidth}),m[1]=e.lineWidth,m[2]=i):i=m[2],m[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)("col",{}),m[3]=r):r=m[3],m[4]!==e.lineWidth?(a=(0,n.jsx)("col",{width:e.lineWidth}),m[4]=e.lineWidth,m[5]=a):a=m[5],m[6]===Symbol.for("react.memo_cache_sentinel")?(l=(0,n.jsx)("col",{}),m[6]=l):l=m[6],m[7]!==i||m[8]!==a?(s=(0,n.jsxs)("colgroup",{children:[i,r,a,l]}),m[7]=i,m[8]=a,m[9]=s):s=m[9],m[10]!==e.children?(d=(0,n.jsx)("tbody",{children:e.children}),m[10]=e.children,m[11]=d):d=m[11],m[12]!==s||m[13]!==d?(c=(0,n.jsxs)(n.Fragment,{children:[t,s,d]}),m[12]=s,m[13]=d,m[14]=c):c=m[14],c}try{b.displayName||(b.displayName="SplitDiffTable")}catch{}function y(e){let t,i,r,a,l,s,d;let c=(0,o.c)(13);return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)("thead",{className:"sr-only",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{scope:"col",children:"Original file line number"}),(0,n.jsx)("th",{scope:"col",children:"Diff line number"}),(0,n.jsx)("th",{scope:"col",children:"Diff line change"})]})}),c[0]=t):t=c[0],c[1]!==e.lineWidth?(i=(0,n.jsx)("col",{width:e.lineWidth}),r=(0,n.jsx)("col",{width:e.lineWidth}),c[1]=e.lineWidth,c[2]=i,c[3]=r):(i=c[2],r=c[3]),c[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,n.jsx)("col",{width:"100%"}),c[4]=a):a=c[4],c[5]!==i||c[6]!==r?(l=(0,n.jsxs)("colgroup",{children:[i,r,a]}),c[5]=i,c[6]=r,c[7]=l):l=c[7],c[8]!==e.children?(s=(0,n.jsx)("tbody",{children:e.children}),c[8]=e.children,c[9]=s):s=c[9],c[10]!==l||c[11]!==s?(d=(0,n.jsxs)(n.Fragment,{children:[t,l,s]}),c[10]=l,c[11]=s,c[12]=d):d=c[12],d}try{y.displayName||(y.displayName="UnifiedDiffTable")}catch{}let C={diffTextCell:"UnifiedDiffLines-module__diffTextCell--UAuIr",diffHunkCell:"UnifiedDiffLines-module__diffHunkCell--qPkzg",diffHunkText:"UnifiedDiffLines-module__diffHunkText--Sfwuu",diffTextInner:"UnifiedDiffLines-module__diffTextInner--IuEAA",diffTextMarker:"UnifiedDiffLines-module__diffTextMarker--MdAo4",syntaxHighlightedAdditionLine:"UnifiedDiffLines-module__syntaxHighlightedAdditionLine--lU_S2",syntaxHighlightedDeletionLine:"UnifiedDiffLines-module__syntaxHighlightedDeletionLine--xgQwN",diffLineNumber:"UnifiedDiffLines-module__diffLineNumber--bzzxf"};function j(e){let t,i,r,a;let s=(0,o.c)(9),{line:d,children:c}=e;return s[0]!==d.type?(t=(0,l.gK)(d.type,!0),s[0]=d.type,s[1]=t):t=s[1],s[2]!==t?(i={backgroundColor:t,textAlign:"center"},s[2]=t,s[3]=i):i=s[3],s[4]!==c?(r=(0,n.jsx)("code",{children:c}),s[4]=c,s[5]=r):r=s[5],s[6]!==i||s[7]!==r?(a=(0,n.jsx)("td",{className:C.diffLineNumber,style:i,children:r}),s[6]=i,s[7]=r,s[8]=a):a=s[8],a}function v(e){let t,i,l;let s=(0,o.c)(4),{line:d}=e;s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,n.jsx)(g,{}),s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.$)(C.diffTextInner,"color-fg-muted"),s[1]=i):i=s[1];let c=d.html;return s[2]!==c?(l=(0,n.jsx)("td",{colSpan:4,className:C.diffHunkCell,valign:"top",children:(0,n.jsxs)("div",{className:"d-flex flex-row",children:[t,(0,n.jsx)("code",{className:C.diffHunkText,children:(0,n.jsx)(a.mo,{className:i,html:c})})]})}),s[2]=c,s[3]=l):l=s[3],l}function N(e){let t,i,s;let d=(0,o.c)(13),{line:c}=e,m="HUNK"===c.type,u="ADDITION"!==c.type,f="DELETION"!==c.type,h="ADDITION"===c.type?"+":"DELETION"===c.type?"-":void 0,p=!!h;return d[0]!==m||d[1]!==c?(t=m&&(0,n.jsx)(v,{line:c}),d[0]=m,d[1]=c,d[2]=t):t=d[2],d[3]!==m||d[4]!==c||d[5]!==h||d[6]!==u||d[7]!==p||d[8]!==f?(i=!m&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j,{line:c,children:u&&c.left}),(0,n.jsx)(j,{line:c,children:f&&c.right}),(0,n.jsx)("td",{className:C.diffTextCell,style:{backgroundColor:(0,l.gK)(c.type,!1)},children:(0,n.jsxs)("code",{className:(0,r.$)("ADDITION"===c.type&&C.syntaxHighlightedAdditionLine,"DELETION"===c.type&&C.syntaxHighlightedDeletionLine),children:[p&&(0,n.jsx)("span",{className:C.diffTextMarker,children:h}),(0,n.jsx)(a.mo,{className:C.diffTextInner,html:c.html,style:{backgroundColor:(0,l.gK)(c.type,!1)}})]})})]}),d[3]=m,d[4]=c,d[5]=h,d[6]=u,d[7]=p,d[8]=f,d[9]=i):i=d[9],d[10]!==t||d[11]!==i?(s=(0,n.jsxs)("tr",{children:[t,i]}),d[10]=t,d[11]=i,d[12]=s):s=d[12],s}function S(e){let t,i,a,l,s;let d=(0,o.c)(17),{className:c,sx:u,lines:f,lineWidth:h,tabSize:p}=e;if(d[0]!==f||d[1]!==p){let e;d[3]!==p?(e=(e,t)=>(0,n.jsx)(N,{line:e,tabSize:p},t),d[3]=p,d[4]=e):e=d[4],t=f.map(e),d[0]=f,d[1]=p,d[2]=t}else t=d[2];let g=t;return d[5]!==c?(i=(0,r.$)(c,"tab-size"),d[5]=c,d[6]=i):i=d[6],d[7]!==u?(a={borderTop:0,borderBottom:0,borderLeft:1,borderRight:1,borderStyle:"solid",borderColor:"border.muted",...u},d[7]=u,d[8]=a):a=d[8],d[9]!==g||d[10]!==h?(l=(0,n.jsx)(y,{lineWidth:h,children:g}),d[9]=g,d[10]=h,d[11]=l):l=d[11],d[12]!==i||d[13]!==a||d[14]!==l||d[15]!==p?(s=(0,n.jsx)(m.A,{as:"table",className:i,"data-tab-size":p,sx:a,children:l}),d[12]=i,d[13]=a,d[14]=l,d[15]=p,d[16]=s):s=d[16],s}try{j.displayName||(j.displayName="LineNumberCell")}catch{}try{v.displayName||(v.displayName="HunkCell")}catch{}try{N.displayName||(N.displayName="UnifiedDiffRow")}catch{}try{S.displayName||(S.displayName="UnifiedDiffLines")}catch{}function T(e){return"LEFT"===e?"-":"RIGHT"===e?"+":""}function E({startDiffSide:e,endDiffSide:t,originalStartLine:i,originalEndLine:n}){return e&&t&&"number"==typeof i&&"number"==typeof n?0===i&&1===n&&e===t?"-1 to +1":e===t&&i===n?`${T(e)}${i}`:`${T(e)}${i} to ${T(t)}${n}`:""}},1515:(e,t,i)=>{i.d(t,{z:()=>r});var n=i(74848),o=i(75177);let r=(0,i(96540).forwardRef)(({onClick:e,id:t,children:i},r)=>(0,n.jsx)(o.A,{as:"button",type:"button",id:t,ref:r,sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"left",fontWeight:400,color:"fg.muted",width:"100%",backgroundColor:"canvas.default",border:"1px solid",borderColor:"border.default",cursor:"text",borderRadius:2,height:"var(--control-medium-size)",lineHeight:"var(--text-body-lineHeight-medium)",px:2},onClick:e,children:i}));r.displayName="CompactCommentButton"},14768:(e,t,i)=>{i.d(t,{U:()=>m});var n=i(74848),o=i(96071),r=i(96679),a=i(75177),l=i(96540),s=i(35608),d=i(51891),c=i(99588);function m({batchPending:e,batchingEnabled:t,commentBoxConfig:i,commentBoxSubject:m,condensed:u,fileLevelComment:f,filePath:h,focusOnMount:p,isReplying:g,lineNumber:x,onAddComment:b,onCancelComment:y,onPersistedCommentExists:C,quotedText:j="",side:v,startLineNumber:N,subjectId:S,threadId:T,suggestedChangesConfig:E}){let[_,D]=(0,l.useState)(j),[I,A]=(0,l.useState)(!1),[L,R]=(0,l.useState)(),w=(0,l.useRef)(null),O=(0,l.useRef)(null),{persistCommentToStorage:k,removePersistedCommentFromStorage:U}=(0,s.L)({diffSide:v,filePath:h,line:x,subjectId:S,threadId:T,handlePersistedCommentExists:({text:e})=>{e&&(D(e),C?.())},fileLevelComment:!!f});(0,l.useEffect)(()=>{if(p){let e=setTimeout(()=>{if(O.current&&(r.XC||r.cg)){let e=O.current,t=e.getBoundingClientRect(),i=r.XC?.documentElement.clientHeight||0;if(!(t.top>=0&&t.bottom<=(r.cg?.innerHeight||i))){let n=t.top,o=r.XC?.documentElement.getBoundingClientRect().top||0,a=e.clientHeight*(2/3);r.cg?.scrollTo({top:n-o-2/3*i+a,behavior:"smooth"})}}w.current?.focus()},100);return()=>{window.clearTimeout(e)}}},[p]);let P=({submitBatch:e})=>{let t="Failed to save comment";if(I)return;if(!_.trim()){R(`${t}: Body can't be blank`);return}A(!0),R(void 0);let i=(0,d.u)(_,E?.sourceContentFromDiffLines??"");if(!i.isValid){R(i.errorMessage),A(!1);return}b?.({commentText:_,onCompleted(){A(!1),M()},onError(e){A(!1),e.message&&(t=`${t}: ${e.message}`),R(t)},submitBatch:e})},$=()=>P({submitBatch:!1}),B=()=>P({submitBatch:!0}),M=(0,l.useCallback)(()=>{U(),D(""),y?.()},[y,U]),H={footer:{justifyContent:g?"end":"space-between","> div:first-child":{display:u||g?"none":"flex"},...u&&{"> div:last-child":{display:"flex",flexDirection:"column",width:"100%"}}}};return(0,n.jsx)(a.A,{sx:{display:"flex",flexDirection:"column",fieldset:{minWidth:0,width:["100%"]}},onKeyDown:e=>{"Escape"!==e.key||_.trim()?e.stopPropagation():(e.preventDefault(),M())},children:(0,n.jsxs)(c.S,{ref:w,label:"Add diff comment",sx:H,value:_,onChange:e=>{R(void 0),k({text:e}),D(e)},onPrimaryAction:t?$:B,userSettings:i,suggestedChangesConfig:E,markdownErrorMessage:L,subject:m,lineNumber:x,filePath:h,startLineNumber:N,children:[y&&(0,n.jsx)(o.x,{disabled:I,sx:{py:1,px:2},variant:"default",onClick:M,children:"Cancel"}),!e&&(0,n.jsx)(o.x,{disabled:I||!_.length,sx:{py:1,px:2},variant:t?"default":"primary",onClick:B,ref:O,children:g?"Reply":"Comment"}),t&&(0,n.jsx)(o.x,{disabled:I||!_.length,sx:{py:1,px:2},variant:"primary",onClick:$,children:e?"Add review comment":"Start a review"})]})})}try{m.displayName||(m.displayName="AddCommentEditor")}catch{}},30754:(e,t,i)=>{i.d(t,{$:()=>b});var n=i(74848),o=i(75367),r=i(64899),a=i(69676),l=i(82678),s=i(75177),d=i(63867),c=i(73451),m=i(9591),u=i(19647),f=i(27331),h=i(96540);function p({children:e,footerButtons:t}){let{containerRef:i}=(0,l.G)({bindKeys:a.z0.ArrowHorizontal|a.z0.Tab,focusInStrategy:"closest"});return t?(0,n.jsx)(f.l.Footer,{ref:i,children:(0,n.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,n.jsx)(s.A,{sx:{display:"flex",flexDirection:"row",gap:2,justifyContent:"flex-end"},children:(0,n.jsx)(f.l.Buttons,{buttons:t})}),e]})}):null}let g={CHANGE_COMMIT_MESSAGE:"CHANGE_COMMIT_MESSAGE",CHANGE_EXTENDED_DESCRIPTION:"CHANGE_EXTENDED_DESCRIPTION"};function x(e,t){switch(t.type){case g.CHANGE_COMMIT_MESSAGE:return{...e,commitMessage:t.payload};case g.CHANGE_EXTENDED_DESCRIPTION:return{...e,extendedDescription:t.payload};default:return console.error("Unknown suggested change action."),e}}function b({authorLogins:e,batchSize:t,onClose:i,onCommit:a}){let l=(0,r.A)(),{sendAnalyticsEvent:b}=(0,o.s)(),[y,C]=(0,h.useState)(!1),[j,v]=(0,h.useState)(),[N,S]=(0,h.useReducer)(x,{commitMessage:1===e.length?`Apply suggestion from @${e[0]}`:1===new Set(e).size?`Apply suggestions from @${e[0]}`:"Apply suggestions from code review",extendedDescription:""}),T=(0,h.useCallback)((e,t,i)=>{if(!l())return;let n="There was an error trying to commit changes";i?n+=`: ${i}`:n+=".",C(!1),v(n)},[l]),E=(0,h.useCallback)(()=>{l()&&(C(!1),j&&v(void 0))},[j,l]),_=(0,h.useCallback)(()=>{y||(C(!0),b("comments.commit_suggestion","COMMIT_SUGGESTION_DIALOG_BUTTON",{batchSize:t}),a(`${N.commitMessage}

${N.extendedDescription}`,T,E))},[t,N.commitMessage,N.extendedDescription,E,T,y,a,b]);return(0,n.jsxs)(f.l,{title:"Apply suggestion",renderFooter:()=>(0,n.jsx)(p,{footerButtons:[{content:"Cancel",onClick:i},{content:(0,n.jsxs)(s.A,{as:"span",sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:["Commit changes",y&&(0,n.jsx)(d.A,{size:"small",sx:{ml:1}})]}),onClick:_,buttonType:"primary"}],children:j&&(0,n.jsx)(c.A.Validation,{sx:{mt:2,pt:1,justifyContent:"flex-end"},variant:"error",children:j})}),onClose:i,children:[(0,n.jsxs)(c.A,{sx:{mb:2},children:[(0,n.jsx)(c.A.Label,{children:"Commit message"}),(0,n.jsx)(m.A,{block:!0,name:"commit_message",onChange:e=>S({type:g.CHANGE_COMMIT_MESSAGE,payload:e.target.value}),value:N.commitMessage})]}),(0,n.jsxs)(c.A,{children:[(0,n.jsx)(c.A.Label,{children:"Extended description (optional)"}),(0,n.jsx)(u.Ay,{block:!0,rows:3,placeholder:"Add an optional description...",onChange:e=>S({type:g.CHANGE_EXTENDED_DESCRIPTION,payload:e.target.value}),value:N.extendedDescription})]})]})}try{p.displayName||(p.displayName="DialogFooter")}catch{}try{b.displayName||(b.displayName="ApplySuggestionDialog")}catch{}},99588:(e,t,i)=>{i.d(t,{S:()=>r});var n=i(74848),o=i(46542);let r=(0,i(96540).forwardRef)(({children:e,subject:t,...i},r)=>(0,n.jsx)(o.h,{...i,ref:r,placeholder:"Leave a comment",actions:e,subject:t,showLabel:!1}));r.displayName="ConversationCommentBox"},83283:(e,t,i)=>{i.d(t,{H:()=>p});var n=i(74848),o=i(1515),r=i(96679),a=i(75367),l=i(75177),s=i(37827),d=i(96540),c=i(38666),m=i(43032),u=i(14768),f=i(62812),h=i(22904);function p({batchingEnabled:e,batchPending:t,commentAnchorPrefix:i,commentingImplementation:p,commentsConnectionId:g,filePath:x,hideDiffPreview:b,isInlineComment:y,onRefreshThread:C,enterDialogMode:j,repositoryId:v,subject:N,subjectId:S,tabSize:T,thread:E,threadsConnectionId:_,shouldLimitHeight:D=!0,suggestedChangesConfig:I,viewerData:A,ghostUser:L}){let[R,w]=(0,d.useState)(!1),[O,k]=(0,d.useState)(void 0),{sendAnalyticsEvent:U}=(0,a.s)(),{addThreadReply:P}=p,$=(0,d.useRef)(null),B=e=>{k(e),w(!0)};if(null===E.commentsData.comments||E.commentsData.comments.length<1)return null;let M=(0,m.Lm)(E),H="LINE"===E.subjectType?{lineRange:M}:void 0;return(0,n.jsx)("div",{"data-testid":"review-thread",children:(0,n.jsxs)(l.A,{sx:D?{maxHeight:"40vh",overflowY:"auto"}:{},children:[!b&&E.isOutdated&&(0,n.jsx)(h.i,{subject:E.subject,tabSize:T??4}),E.commentsData.comments.map((e,t)=>(0,n.jsx)(f.U,{enterDialogMode:j,isAnchorable:!0,index:t,isFirstComment:0===t,isInlineComment:y,isLastChild:t===E.commentsData.comments.length-1,anchorPrefix:i,comment:e,commentConnectionId:E.commentsData.__id,commentingImplementation:p,filePath:x,isOutdated:E.isOutdated,repositoryId:v,subject:N,subjectId:S,threadId:E.id,onRefreshThread:C,onQuoteReply:B,threadCommentCount:E.commentsData.comments.length,threadsConnectionId:_,isThreadResolved:!!E.isResolved,suggestedChangesConfig:I,applySuggestedChangesValidationData:H,viewerData:A,ghostUser:L},e.id)),E.reviewCommentsLimitExceeded&&(0,n.jsx)(s.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${(E.reviewCommentsLimit||0)-1} replies are currently being shown.`,className:"m-3"}),E.viewerCanReply&&(0,n.jsxs)(l.A,{sx:{borderBottomLeftRadius:2,borderBottomRightRadius:2,p:2},children:[R&&(0,n.jsx)(u.U,{batchingEnabled:e,batchPending:t,commentBoxConfig:p.commentBoxConfig,commentBoxSubject:p.commentBoxSubject,condensed:!1,fileLevelComment:!0,filePath:x,focusOnMount:!0,isReplying:!0,onCancelComment:()=>{w(!1),U("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON"),r.cg?.requestAnimationFrame(()=>$.current?.focus())},repositoryId:v,quotedText:O,subjectId:S,threadId:E.id,onAddComment:({commentText:e,onCompleted:t,onError:i,submitBatch:n})=>{let o=[];E.commentsData.__id&&o.push(E.commentsData.__id),g&&o.push(g),P({commentsConnectionIds:o,filePath:x,thread:E,text:e,submitBatch:n,onCompleted:e=>{e&&(0,c.p)(e.toString()),t?.(),C?.(E.id)},onError:i,threadsConnectionId:_}),U("comments.add","ADD_COMMENT_BUTTON")},suggestedChangesConfig:I}),!R&&(0,n.jsx)(o.z,{ref:$,onClick:()=>{U("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),w(!0)},children:"Write a reply"})]})]})})}try{p.displayName||(p.displayName="ReviewThread")}catch{}},62812:(e,t,i)=>{i.d(t,{U:()=>z});var n=i(74848),o=i(46542),r=i(6489),a=i(80221),l=i(9808),s=i(40538),d=i(13233),c=i(63849),m=i(75062),u=i(12617),f=i(42083),h=i(96679),p=i(99543),g=i(38621),x=i(53526),b=i(75177),y=i(6869),C=i(96540),j=i(58655),v=i(38666),N=i(35608),S=i(51891),T=i(99588),E=i(17515),_=i(40961),D=i(43032),I=i(46839),A=i(75367),L=i(55847);function R({commentingImplementation:e,suggestedChange:t}){let{sendAnalyticsEvent:i}=(0,A.s)();return(0,n.jsx)(b.A,{sx:{display:"flex",flexDirection:"row-reverse"},children:(0,n.jsx)(L.Q,{variant:"primary",onClick:()=>{i("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON"),e.addSuggestedChangeToPendingBatch(t)},children:"Add suggestion to batch"})})}try{R.displayName||(R.displayName="AddToExistingBatch")}catch{}var w=i(91321),O=i(89323),k=i(87330),U=i(15385);let P={applySuggestion:{text:"Apply suggestion"},addSuggestionToBatch:{text:"Add suggestion to batch",inactive:!0,inactiveReason:"This feature is not supported yet."}};function $({commentingImplementation:e,onOpenDialog:t,suggestedChange:i}){let{sendAnalyticsEvent:o}=(0,A.s)(),[r,a]=(0,C.useState)(P.applySuggestion),[l,s]=(0,C.useState)(!1),d=(0,C.useRef)(null),c=(0,C.useRef)(null),m=()=>s(!l),{addSuggestedChangeToPendingBatch:u}=e,f=(0,C.useCallback)(()=>{r===P.addSuggestionToBatch&&(u(i),o("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")),r===P.applySuggestion&&t(c)},[u,t,r,o,i]);return(0,n.jsx)(b.A,{sx:{display:"flex",flexDirection:"row-reverse"},children:(0,n.jsxs)(w.A,{children:[(0,n.jsx)(L.Q,{variant:"primary",onClick:f,ref:c,children:r.text}),(0,n.jsxs)(O.W,{anchorRef:d,open:l,onOpenChange:m,children:[(0,n.jsx)(O.W.Anchor,{children:(0,n.jsx)(k.K,{ref:d,"aria-haspopup":"true","aria-label":"More suggestion batching options",icon:g.TriangleDownIcon,size:"medium",variant:"primary",onClick:m})}),(0,n.jsx)(O.W.Overlay,{width:"medium",children:(0,n.jsx)(U.l,{selectionVariant:"single",children:Object.keys(P).map(e=>{let t=P[e];return(0,n.jsx)(U.l.Item,{selected:r===t,onSelect:()=>a(t),inactiveText:t.inactiveReason,children:t.text},e)})})})]})]})})}try{$.displayName||($.displayName="ApplyOrAddToBatch")}catch{}var B=i(30754),M=i(52464);function H({reason:e,sx:t}){return(0,n.jsx)(b.A,{sx:{m:2,...t},children:(0,n.jsx)(M.A,{as:"small",sx:{color:"fg.muted"},children:e})})}try{H.displayName||(H.displayName="CodeSuggestionUnavailable")}catch{}var G=i(47139);function F({commentingImplementation:e,onOpenDialog:t,suggestedChange:i}){let o=(0,C.useRef)(null),r=(0,C.useCallback)(()=>{t(o)},[t]),a=e.pendingSuggestedChangesBatch.length,{sendAnalyticsEvent:l}=(0,A.s)();return(0,n.jsxs)(b.A,{sx:{display:"flex",justifyContent:"space-between",flexDirection:"row"},children:[(0,n.jsx)(G.A,{variant:"attention",sx:{my:"auto"},children:"Pending in batch"}),(0,n.jsxs)(b.A,{sx:{display:"flex",gap:2},children:[(0,n.jsx)(L.Q,{size:"medium",variant:"danger",onClick:()=>{e.removeSuggestedChangeFromPendingBatch(i),l("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},children:"Remove from batch"}),(0,n.jsx)(L.Q,{ref:o,size:"medium",count:a,variant:"primary",onClick:r,children:`Apply suggestion${a>1?"s":""}`})]})]})}try{F.displayName||(F.displayName="CommitOrRemoveFromBatch")}catch{}function V({commentingImplementation:e,suggestedChange:t}){let{setIsDialogOpen:i}=(0,I.W)(),[o,r]=(0,C.useState)(!1),a=(0,C.useRef)(void 0),{pendingSuggestedChangesBatch:l,submitSuggestedChanges:s}=e,d=(0,D.c0)(t,l),c=0===l.length,{isValid:m,reason:u}=(0,D.EJ)(t,l),f=(0,C.useMemo)(()=>d?l:[t],[d,l,t]),h=(0,C.useCallback)(e=>{r(e),i?.(e)},[i]),p=(0,C.useCallback)(()=>{if(h(!1),a.current){let e=a.current.current;setTimeout(()=>e?.focus())}},[h]),g=(0,C.useCallback)(e=>{h(!0),a.current=e},[h,a]),x=(0,C.useCallback)((e,t,i)=>{s({suggestedChanges:f,commitMessage:e,onCompleted:()=>{p(),i()},onError:t})},[p,s,f]);return(0,n.jsxs)(b.A,{sx:{p:2,borderTop:"1px solid",borderColor:"border.default"},children:[d&&(0,n.jsx)(F,{commentingImplementation:e,suggestedChange:t,onOpenDialog:g}),!d&&!m&&u&&(0,n.jsx)(H,{reason:u,sx:{m:0}}),!d&&c&&(0,n.jsx)($,{commentingImplementation:e,suggestedChange:t,onOpenDialog:g}),!d&&m&&!c&&(0,n.jsx)(R,{commentingImplementation:e,suggestedChange:t}),o&&(0,n.jsx)(B.$,{authorLogins:f.map(e=>e.authorLogin),batchSize:f.length,onClose:p,onCommit:x})]})}try{V.displayName||(V.displayName="CodeSuggestionActions")}catch{}function q({applySuggestedChangesValidationData:e,comment:t,commentBodyRef:i,commentingImplementation:o,filePath:r,isOutdated:a,isThreadResolved:l,subject:s,suggestedChangesConfig:d,databaseId:c,viewerData:m}){let u=function(e,t,i,n,o){let[r,a]=(0,C.useState)();return(0,E.N)(()=>{if(!e.current||t.subjectType?.toUpperCase()!=="LINE")return;let r=[...e.current.getElementsByClassName("js-apply-changes")];if(r.length>0){let e=[];for(let a of r){let r=a?.closest("div.js-suggested-changes-blob");if(!r)continue;let l=[...r.querySelectorAll(".js-blob-code-addition")];o.lineRange&&e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,path:i,ref:a,suggestion:l.map(e=>e.textContent),lineRange:o.lineRange,threadId:n})}a(e)}},[o.lineRange,t.author?.login,t.bodyHTML,t.id,t.subjectType,e,i,n]),r}(i,t,r,c,e),f=s?.state?.toUpperCase();return(0,n.jsx)(n.Fragment,{children:u?.length?u.map(i=>{let{isValid:r,reason:c}=(0,D.o_)({suggestedChange:i,isOutdated:a,isPending:"PENDING"===t.state.toUpperCase(),isResolved:l,pullRequestIsClosed:void 0===f||"CLOSED"===f||"MERGED"===f,pullRequestIsInMergeQueue:!!s?.isInMergeQueue,userCanApplySuggestion:!!m?.viewerCanApplySuggestion,applySuggestedChangesValidationData:e,suggestedChangesConfig:d});return!r&&c?(0,_.createPortal)((0,n.jsx)(H,{reason:c}),i.ref):(0,_.createPortal)((0,n.jsx)(V,{commentingImplementation:o,suggestedChange:i}),i.ref)}):null})}try{q.displayName||(q.displayName="SuggestedChangeView")}catch{}function z({isAnchorable:e=!1,index:t=0,isInlineComment:i,isLastChild:E,isOutdated:_,isThreadResolved:D,anchorPrefix:I="r",comment:A,commentingImplementation:L,filePath:R,hideActions:w,isFirstComment:O=!1,enterDialogMode:k=d.l,onRefreshThread:U,onQuoteReply:P=d.l,subjectId:$,subject:B,threadCommentCount:M,threadId:H,threadsConnectionId:G,suggestedChangesConfig:F,applySuggestedChangesValidationData:V,viewerData:z,ghostUser:W=l.t.ghostUser,skipReactions:K=!1}){let{addToast:Q}=(0,p.Y6)(),[Y,X]=(0,C.useState)(!1),[J,Z]=(0,C.useState)(A.isHidden),[ee,et]=(0,C.useState)(A.body),[ei,en]=(0,C.useState)(!1),[eo,er]=(0,C.useState)(""),{persistCommentToStorage:ea,removePersistedCommentFromStorage:el}=(0,N.L)({subjectId:$,filePath:R,fileLevelComment:"FILE"===A.subjectType,threadId:A.id,handlePersistedCommentExists:({text:e})=>{e&&et(e)}}),{editComment:es,deleteComment:ed,hideComment:ec,unhideComment:em,reactToComment:eu,lazyFetchReactionGroups:ef}=L,eh=(0,C.useRef)(null),ep=(0,C.useRef)(null),[eg,ex]=(0,C.useState)(""),{isInDialogMode:eb}=(0,j.q)(),ey=()=>{eh.current?.focus()};(0,C.useEffect)(()=>{if(Y){let e=window.setTimeout(ey);return()=>{window.clearTimeout(e)}}},[Y]);let eC=(0,x.S)(),{enableInlineCommentDialogMode:ej,disableInlineCommentDialogMode:ev}=(0,j.q)(),eN=async()=>{ev();let e=!1;try{e=await eC({title:"Delete comment?",content:"Are you sure you want to delete this comment?",confirmButtonContent:"Delete",confirmButtonType:"danger"})}finally{ej()}e&&ed({commentId:A.id,onCompleted:()=>{U?.(H)},onError:()=>{en(!1),Q({type:"error",message:"Failed to delete comment"})},threadCommentCount:M,threadId:H,threadsConnectionId:G,filePath:R})},eS=(0,C.useCallback)(()=>{en(!0);let e=(0,S.u)(ee,F?.sourceContentFromDiffLines??"");if(!e.isValid){er(e.errorMessage),en(!1);return}es({text:ee,comment:A,onCompleted:()=>{X(!1),en(!1),el(),U?.(H)},onError:()=>{en(!1),Q({type:"error",message:"Failed to update comment"})}})},[Q,ee,A,es,U,el,F,H]),eT=A.databaseId?.toString(),eE=eT?`${I}${eT}`:void 0,e_=eE&&h.fV?new URL(`${h.fV.pathname}#${eE}`,h.fV.origin).toString():"",eD=(0,C.useRef)(null);(0,C.useEffect)(()=>{e&&eT&&eE&&window.location.hash.split("#").pop()===eE&&((0,v.p)(eT,I),k?.(!1),eD.current?.focus())},[I,eE,eT,k,e]);let eI={outline:"2px solid",outlineColor:"accent.fg",outlineOffset:"-2px",boxShadow:"none"},eA=t>0,eL=t>1,eR=L.suggestedChangesEnabled,ew=Y?"editing":J?"hidden":"visible",eO={headingProps:{as:"h3"},avatarUrl:A.author?.avatarUrl??W.avatarUrl,comment:{...A,url:e_,referenceText:A.reference.text??`#${A.reference.number}`},commentRef:eD,deleteComment:eN,editComment:()=>{X(!0)},editHistoryComponent:void 0,hideComment:e=>{ec({commentDatabaseId:A.databaseId,reason:e,onCompleted:()=>{U?.(H)},onError:()=>{en(!1),ex("Failed to hide comment")}})},onMinimize:Z,onSuccessfulBlock:()=>{setTimeout(()=>h.cg?.location.reload(),800)},isMinimized:J,commentAuthorLogin:A.author?.login??W.login,navigate:d.l,commentSubjectAuthorLogin:A.reference?.author?.login??"",commentSubjectType:L.commentSubjectType,onReplySelect:P,unhideComment:()=>{em({commentDatabaseId:A.databaseId,onCompleted:()=>{U?.(H)},onError:()=>{en(!1),ex("Failed to unhide comment")}})},hideActions:w,isReply:eA,forceInlineAvatar:!0,containerStyle:{},commentAuthorSlug:"copilot"===A.reviewVariantType?"copilot-pull-request-reviewer":void 0,commentAuthorType:"copilot"===A.reviewVariantType?"Bot":void 0};return(0,n.jsxs)(b.A,{ref:eD,id:e?eE:void 0,tabIndex:i?eb?0:-1:0,"data-first-thread-comment":O,"data-marker-navigation-comment-thread-id":H,"data-marker-navigation-comment-id":A.id,...eb?{role:"document","aria-label":`${(()=>{let e=A.author?.login??W.login,t=new Date(A.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0});return`${e} ${eA?"replied:":"commented:"} ${A.body.trim()}. Posted on ${t}.`})()}`,"aria-roledescription":"comment"}:{},sx:{"&:not(:first-child)":{backgroundColor:"canvas.inset"},"&:first-child + div":{borderTop:"1px solid",borderColor:"border.muted"},":target":eI,":focus":eI,scrollMarginTop:e?"120px":0},children:[eL&&(0,n.jsx)(b.A,{sx:{display:"flex",pl:eA?1:0},children:(0,n.jsx)(b.A,{sx:{ml:4,height:8,borderLeft:"1px solid",borderColor:"border.default"}})}),(0,n.jsx)(b.A,{sx:{px:3,pt:eL?0:2,pb:0},children:(0,n.jsx)(r.v,{...eO,commentBody:A.body,threadCommentCount:M,isInDialogMode:eb,actions:w?void 0:(0,n.jsx)(a.p,{...eO})})}),eg&&(0,n.jsxs)(y.A,{variant:"danger",className:"m-3",children:[(0,n.jsx)(g.StopIcon,{className:"mr-2"}),eg]}),(0,n.jsxs)(b.A,{sx:{display:"flex",pl:eA?1:0},children:[eA&&(0,n.jsx)(b.A,{sx:{ml:4,mr:1,pl:3,borderLeft:"1px solid",borderColor:"border.default",...E&&{borderImage:"linear-gradient(to bottom, var(--borderColor-default, var(--color-border-default)), rgba(0, 0, 0, 0)) 1 100%"}}}),"editing"===ew&&(0,n.jsx)(b.A,{sx:{pr:2,pl:eA?0:2,pb:2,pt:1,flexGrow:1},children:(0,n.jsxs)(T.S,{ref:eh,label:"Update comment",value:ee,onChange:e=>{ea({text:e}),et(e),er(void 0)},onPrimaryAction:eS,userSettings:L.commentBoxConfig,subject:L.commentBoxSubject,suggestedChangesConfig:F,markdownErrorMessage:eo,children:[(0,n.jsx)(o.x,{variant:"default",onClick:()=>{X(!1),el(),et(A.body)},children:"Cancel"}),(0,n.jsx)(o.x,{disabled:ei||!ee.length,variant:"primary",onClick:eS,children:"Update"})]})}),"visible"===ew&&(0,n.jsx)(b.A,{sx:eA?{pb:2,pr:2,overflowX:"auto",width:"100%"}:{px:3,pb:2,width:"100%"},children:A.bodyHTML&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.oG,{ref:ep,className:"markdown-body","comment-testid":`Comment body html for comment ${A.id}`,html:A.bodyHTML,sx:{mt:1,fontSize:1}}),"copilot"===A.reviewVariantType&&(0,n.jsxs)("p",{className:"text-small color-fg-muted mt-2 mb-1",children:[(0,n.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"Link--inTextBlock",href:"https://docs.github.com/en/copilot/responsible-use-of-github-copilot-features/responsible-use-of-github-copilot-code-review",children:"Copilot"})," ","uses AI. Check for mistakes."]}),(0,n.jsxs)("div",{className:"d-flex flex-direction-column gap-2",children:["copilot"===A.reviewVariantType&&(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(s.Z,{commentUrl:A.url,commentId:A.databaseId?.toString()??""})}),A.reactionGroups&&eu?(0,n.jsx)("div",{className:"d-flex flex-direction-column mt-2",children:(0,n.jsx)(c.P,{reactionGroups:A.reactionGroups,onReact:(e,t)=>{eu?.({commentDatabaseId:A.databaseId,threadId:H,reaction:e,viewerHasReacted:t,onCompleted:()=>{U?.(H)},onError:()=>{en(!1),Q({type:"error",message:"Failed to react to comment"})}})},canReact:A.viewerCanReact})}):!K&&(0,n.jsx)(b.A,{sx:{display:"flex",flexDirection:"column",mt:3},children:ef?(0,n.jsx)(C.Suspense,{fallback:(0,n.jsx)(m.e,{}),children:(0,n.jsx)(u.ReactionViewerRelayQueryComponent,{id:A.id,subjectLocked:!A.viewerCanReact})}):(0,n.jsx)(u.ReactionViewerRelay,{reactionGroups:A,subjectId:A.id,canReact:A.viewerCanReact})})]}),eR&&V&&(0,n.jsx)(q,{comment:A,commentBodyRef:ep,commentingImplementation:L,filePath:R,isOutdated:_,isThreadResolved:D,databaseId:A.databaseId,suggestedChangesConfig:F,applySuggestedChangesValidationData:V,subject:B,viewerData:z})]})})]})]})}try{z.displayName||(z.displayName="ReviewThreadComment")}catch{}},22904:(e,t,i)=>{i.d(t,{i:()=>s});var n=i(74848),o=i(87591),r=i(91215),a=i(75177),l=i(52464);function s({subject:e,sx:t,tabSize:i,hideHeaderDetails:s,diffTableSx:d}){if(!e?.diffLines||e?.diffLines.length<1)return null;let c=(0,o.c7)(e.diffLines);return(0,n.jsxs)(a.A,{sx:{m:3,border:0,borderBottomWidth:6,borderStyle:"solid",borderColor:"border.muted",borderBottomLeftRadius:2,borderBottomRightRadius:2,...t},children:[!s&&(0,n.jsx)(a.A,{sx:{borderWidth:1,borderStyle:"solid",borderTopLeftRadius:2,borderTopRightRadius:2,borderColor:"border.muted",color:"fg.muted",px:2,py:1},children:(0,n.jsxs)(l.A,{sx:{fontSize:0,color:"fg.muted"},children:["Line"," ",(0,r.Ah)({originalStartLine:e.originalStartLine,originalEndLine:e.originalEndLine,startDiffSide:e.startDiffSide,endDiffSide:e.endDiffSide}),", commit ",(0,n.jsx)("code",{children:e.pullRequestCommit?.commit.abbreviatedOid})]})}),(0,n.jsx)(r.l4,{lineWidth:c,lines:e.diffLines,tabSize:i,sx:d})]})}try{s.displayName||(s.displayName="StaticUnifiedDiffPreview")}catch{}},46839:(e,t,i)=>{i.d(t,{W:()=>l,j:()=>a});var n=i(74848),o=i(96540);let r=(0,o.createContext)({});function a({children:e}){let[t,i]=(0,o.useState)(!1),a=(0,o.useMemo)(()=>({isDialogOpen:t,setIsDialogOpen:i}),[t,i]);return(0,n.jsx)(r.Provider,{value:a,children:e})}let l=()=>(0,o.useContext)(r);try{r.displayName||(r.displayName="DialogStateContext")}catch{}try{a.displayName||(a.displayName="DialogStateProvider")}catch{}},58655:(e,t,i)=>{i.d(t,{f:()=>a,q:()=>l});var n=i(74848),o=i(96540);let r=(0,o.createContext)({isInDialogMode:!1,enableInlineCommentDialogMode:()=>{},disableInlineCommentDialogMode:()=>{}});function a({enableDiffGridMode:e,children:t}){let[i,a]=(0,o.useState)(!1),l=(0,o.useCallback)(()=>{a(!0),e?.(!1)},[e]),s=(0,o.useCallback)(()=>{a(!1),e?.(!0)},[e]),d=(0,o.useMemo)(()=>({isInDialogMode:i,enableInlineCommentDialogMode:l,disableInlineCommentDialogMode:s}),[i,l,s]);return(0,n.jsx)(r.Provider,{value:d,children:t})}let l=()=>(0,o.useContext)(r);try{r.displayName||(r.displayName="InlineCommentDialogModeContext")}catch{}try{a.displayName||(a.displayName="InlineCommentDialogModeProvider")}catch{}},40538:(e,t,i)=>{i.d(t,{Z:()=>N});var n=i(74848),o=i(21728),r=i(70179),a=i(96679),l=i(60039),s=i(96540),d=i(38621),c=i(87330),m=i(27331),u=i(19797),f=i(73451),h=i(19647),p=i(55847),g=i(65607);let x=[{label:"Comment is harmful or unsafe",value:"OFFENSIVE_OR_DISCRIMINATORY"},{label:"Comment is poorly formatted",value:"POORLY_FORMATTED"},{label:"Comment is not true",value:"INCORRECT"},{label:"Comment is not helpful",value:"UNHELPFUL"},{label:"Comment is attached to the wrong line(s)",value:"INCORRECT_LINE"},{label:"Code suggestion is harmful or unsafe",value:"SUGGESTION_OFFENSIVE_OR_DISCRIMINATORY"},{label:"Code suggestion is poorly formatted",value:"SUGGESTION_POORLY_FORMATTED"},{label:"Code suggestion does not solve the problem in the comment",value:"SUGGESTION_UNHELPFUL"},{label:"Code suggestion is invalid",value:"SUGGESTION_INVALID"}],b=e=>{let t,i,r,a;let l=(0,o.c)(15),{onClose:d,onSubmit:c,feedbackOptions:g,returnFocusRef:b}=e,C=void 0===g?x:g,[j,v]=(0,s.useState)(!1);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],l[0]=t):t=l[0];let[N,S]=(0,s.useState)(t),[T,E]=(0,s.useState)("");l[1]!==N||l[2]!==c||l[3]!==T?(i=e=>{e.preventDefault(),v(!0),N.length&&c("NEGATIVE",N,T)},l[1]=N,l[2]=c,l[3]=T,l[4]=i):i=l[4];let _=i;return l[5]!==j||l[6]!==N||l[7]!==C||l[8]!==_||l[9]!==T?(r=()=>(0,n.jsxs)("form",{onSubmit:_,children:[(0,n.jsxs)(m.l.Body,{children:[(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsxs)(u.A,{onChange:S,required:!0,children:[(0,n.jsx)(u.A.Label,{children:"Category"}),C.map(y),j&&!N&&(0,n.jsx)(u.A.Validation,{variant:"error",children:"Please select a feedback category"})]})}),(0,n.jsxs)(f.A,{id:"text_response",children:[(0,n.jsx)(f.A.Label,{children:"How should we improve this response?"}),(0,n.jsx)(h.Ay,{block:!0,rows:2,wrap:"wrap",name:"text_response",value:T,resize:"vertical",onChange:e=>E(e.currentTarget.value)})]})]}),(0,n.jsx)(m.l.Footer,{children:(0,n.jsx)(p.Q,{type:"submit",disabled:j&&(!T||!N),children:"Submit"})})]}),l[5]=j,l[6]=N,l[7]=C,l[8]=_,l[9]=T,l[10]=r):r=l[10],l[11]!==d||l[12]!==b||l[13]!==r?(a=(0,n.jsx)(m.l,{onClose:d,title:"Provide additional feedback",subtitle:"Please help us improve GitHub Copilot by sharing more details about this comment.",returnFocusRef:b,renderBody:r}),l[11]=d,l[12]=b,l[13]=r,l[14]=a):a=l[14],a};try{b.displayName||(b.displayName="NegativeFeedbackForm")}catch{}function y(e){return(0,n.jsxs)(f.A,{id:`feedback_choice_${e.value}`,children:[(0,n.jsx)(g.A,{value:e.value}),(0,n.jsx)(f.A.Label,{children:e.label})]},e.value)}let C=e=>{let t,i;let r=(0,o.c)(5),{onClick:a,disabled:l}=e;return r[0]!==a?(t=()=>a("POSITIVE"),r[0]=a,r[1]=t):t=r[1],r[2]!==l||r[3]!==t?(i=(0,n.jsx)(c.K,{size:"small",variant:"invisible",disabled:l,icon:d.ThumbsupIcon,title:"Positive Feedback","aria-label":"Positive Feedback",onClick:t}),r[2]=l,r[3]=t,r[4]=i):i=r[4],i},j=e=>{let t,i,r,a,l;let m=(0,o.c)(12),{onClick:u,disabled:f,feedbackOptions:h}=e,[p,g]=(0,s.useState)(!1),x=(0,s.useRef)(null);m[0]!==u?(t=(e,t,i)=>{u(e,t,i),g(!1)},m[0]=u,m[1]=t):t=m[1];let y=t;return m[2]!==p||m[3]!==h||m[4]!==y?(i=p&&(0,n.jsx)(b,{onClose:()=>g(!1),onSubmit:y,feedbackOptions:h,returnFocusRef:x}),m[2]=p,m[3]=h,m[4]=y,m[5]=i):i=m[5],m[6]===Symbol.for("react.memo_cache_sentinel")?(r=()=>g(!0),m[6]=r):r=m[6],m[7]!==f?(a=(0,n.jsx)(c.K,{ref:x,size:"small",variant:"invisible",disabled:f,icon:d.ThumbsdownIcon,title:"Negative Feedback","aria-label":"Negative Feedback",onClick:r}),m[7]=f,m[8]=a):a=m[8],m[9]!==i||m[10]!==a?(l=(0,n.jsxs)(n.Fragment,{children:[i,a]}),m[9]=i,m[10]=a,m[11]=l):l=m[11],l};try{C.displayName||(C.displayName="PositiveFeedbackButton")}catch{}try{j.displayName||(j.displayName="NegativeFeedbackButton")}catch{}let v=({commentId:e,commentUrl:t,feedbackPath:i,feedbackOptions:o,additionalParameters:r})=>{let[d,c]=(0,s.useState)(),m=(0,s.useMemo)(()=>{if(i)return i;if(t){let e=new URL(t,a.fV.origin);return e.hash="",`${e}/code_review_feedback`}throw Error("missing feedbackPath and commentUrl")},[t,i]),u=(t,i,n)=>{c(t);try{let o=new FormData;if(o.set("comment_id",e),o.set("feedback",t),r)for(let[e,t]of Object.entries(r))o.set(e,t);for(let e of i??[])o.append("feedback_choice[]",e);n&&o.set("text_response",n),(0,l.DI)(m,{method:"POST",body:o})}catch{}};return(0,n.jsxs)("div",{"data-testid":`copilot-code-review-feedback-${e}`,className:"d-flex gap-1",children:["NEGATIVE"!==d&&(0,n.jsx)(C,{disabled:!!d,onClick:u}),"POSITIVE"!==d&&(0,n.jsx)(j,{disabled:!!d,onClick:u,feedbackOptions:o})]})},N=e=>{let t;let i=(0,o.c)(2);return i[0]!==e?(t=(0,n.jsx)(r.t,{fallback:null,children:(0,n.jsx)(v,{...e})}),i[0]=e,i[1]=t):t=i[1],t};try{v.displayName||(v.displayName="Feedback")}catch{}try{N.displayName||(N.displayName="CopilotCodeReviewFeedback")}catch{}},8579:(e,t,i)=>{i.d(t,{T:()=>f});var n=i(74848),o=i(64899),r=i(38621),a=i(87330),l=i(96540),s=i(34164),d=i(42522),c=i(52811),m=i(640);let u={tooltip:"CopyToClipboardButton-module__tooltip--Dq1IB"};function f({icon:e=r.CopyIcon,size:t="medium",onCopy:i,textToCopy:f,tooltipProps:h,variant:p="invisible",ariaLabel:g,className:x,disabled:b,...y}){let[C,j]=l.useState(!1),v=(0,o.A)(),N=g??`Copy "${f}" to clipboard`,S=C?"Copied!":N,T={size:t,variant:p,onClick:()=>{j(!0),(0,c.i)("Copied!"),(0,m.D)(f),i?.(),setTimeout(()=>v()&&j(!1),2e3)},icon:C?r.CheckIcon:e,className:(0,s.$)(C?"color-fg-success":void 0,x),...y},E=(0,l.useId)();return b?(0,n.jsx)(a.K,{...T,"aria-label":N,disabled:!0}):(0,n.jsx)(d.m,{text:S,"aria-label":N,type:"label",id:E,"aria-hidden":!0,...h,className:(0,s.$)(u.tooltip,h?.className),children:(0,n.jsx)(a.K,{...T,"aria-labelledby":E})})}try{f.displayName||(f.displayName="CopyToClipboardButton")}catch{}},42597:(e,t,i)=>{i.d(t,{u:()=>l});var n=i(74848),o=i(21728),r=i(34164);let a={diffSquare:"DiffSquares-module__diffSquare--h5kjy",addition:"DiffSquares-module__addition--jeNtt",deletion:"DiffSquares-module__deletion--hKV3q",neutral:"DiffSquares-module__neutral--VlyoP"};function l(e){let t,i;let r=(0,o.c)(4),{squares:a}=e;return r[0]!==a?(t=a.map(s),r[0]=a,r[1]=t):t=r[1],r[2]!==t?(i=(0,n.jsx)("div",{className:"d-flex",children:t}),r[2]=t,r[3]=i):i=r[3],i}function s(e,t){return(0,n.jsx)("div",{"data-testid":`${e} diffstat`,className:(0,r.$)(a.diffSquare,a[e])},t)}try{l.displayName||(l.displayName="DiffSquares")}catch{}},24965:(e,t,i)=>{i.d(t,{z:()=>l});var n=i(74848),o=i(21728),r=i(42597);let a={addition:"addition",deletion:"deletion",neutral:"neutral"};function l(e){let t,i,l,s,d,c,m;let u=(0,o.c)(20),{linesAdded:f,linesDeleted:h,linesChanged:p}=e,g=void 0===f?0:f,x=void 0===h?0:h,b=void 0===p?0:p;if(!g&&!x&&!b||0===b)return null;if(u[0]!==g||u[1]!==b||u[2]!==x){let{greenSquares:e,redSquares:i,graySquares:n}=function(e,t,i){let n=i>5?5/i:1,o=Math.floor(e*n),r=Math.floor(t*n);return{greenSquares:o,redSquares:r,graySquares:5-o-r}}(g,x,b);t=[...Array(e).fill(a.addition),...Array(i).fill(a.deletion),...Array(n).fill(a.neutral)],u[0]=g,u[1]=b,u[2]=x,u[3]=t}else t=u[3];let y=t;return u[4]!==g?(i=g>0&&(0,n.jsxs)("span",{"aria-hidden":"true",className:"f6 text-bold fgColor-success",children:["+",g.toLocaleString()]}),u[4]=g,u[5]=i):i=u[5],u[6]!==x?(l=x>0&&(0,n.jsxs)("span",{"aria-hidden":"true",className:"f6 text-bold fgColor-danger",children:["-",x.toLocaleString()]}),u[6]=x,u[7]=l):l=u[7],u[8]!==g||u[9]!==x?(s=function({linesAdded:e,linesDeleted:t}){return`Lines changed: ${e} ${1===e?"addition":"additions"} & ${t} ${1===t?"deletion":"deletions"}`}({linesAdded:g,linesDeleted:x}),u[8]=g,u[9]=x,u[10]=s):s=u[10],u[11]!==s?(d=(0,n.jsx)("span",{className:"sr-only",children:s}),u[11]=s,u[12]=d):d=u[12],u[13]!==y?(c=(0,n.jsx)(r.u,{squares:y}),u[13]=y,u[14]=c):c=u[14],u[15]!==i||u[16]!==l||u[17]!==d||u[18]!==c?(m=(0,n.jsxs)("div",{className:"d-flex flex-items-center gap-1 pl-1",children:[i,l,d,c]}),u[15]=i,u[16]=l,u[17]=d,u[18]=c,u[19]=m):m=u[19],m}try{l.displayName||(l.displayName="DiffStats")}catch{}},75062:(e,t,i)=>{i.d(t,{e:()=>r});var n=i(74848),o=i(94232);function r(){return(0,n.jsx)("div",{className:"d-flex flex-wrap gap-1",children:(0,n.jsx)(o.O,{variant:"elliptical",height:"28px",width:"28px"})})}try{r.displayName||(r.displayName="ReactionViewerLoading")}catch{}}}]);
//# sourceMappingURL=ui_packages_conversations_conversations_ts-ui_packages_copy-to-clipboard_CopyToClipboardButton_tsx-fdb0b0607c2d.js.map